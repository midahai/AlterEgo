ROSTemplateFormatVersion: '2015-09-01'
Transform: Aliyun::Serverless-2018-04-03
Resources:
  oss-manager:
    Type: Aliyun::Serverless::Service
    Properties:
      Description: local invoke demo
    put:
      Type: Aliyun::Serverless::Function
      Properties:
        Handler: index.putOSS
        CodeUri: ./src/fun
        Description: http trigger demo with nodejs8!
        Runtime: nodejs8
      Events:
        http-test:
          Type: HTTP
          Properties:
            AuthType: ANONYMOUS
            Methods:
            - POST
    get:
      Type: Aliyun::Serverless::Function
      Properties:
        Handler: index.getOSS
        CodeUri: ./src/fun
        Description: http trigger demo with nodejs8!
        Runtime: nodejs8
      Events:
        http-test:
          Type: HTTP
          Properties:
            AuthType: ANONYMOUS
            Methods:
              - GET
  beisen-githook:
    Type: Aliyun::Serverless::Service
    Properties:
      Description: beisen gitlab webhook
    post:
      Type: Aliyun::Serverless::Function
      Properties:
        Handler: beisen-gitlab-webhook.handler
        CodeUri: ./src/fun/bs-githook
        Description: get request from githook and post to weixin robot
        Runtime: nodejs8
      Events:
        ux-italent-component:
          Type: HTTP
          Properties:
            AuthType: ANONYMOUS
            Methods:
              - POST
